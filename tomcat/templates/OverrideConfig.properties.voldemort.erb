# Added by "rtb/OverrideConfig.properties.voldemort.erb"
<%
    # find our pod/silo
    @hostname =~ /^(pd[0-9]{0,2})-(rtbs[0-9]{2}).*$/
    server_pod=$1
    server_silo=$3

    # Number of voldemort servers
    case @domain
    when "sea1.audsci.net"
        vold_count=7
    when "dub1.audsci.net"
        vold_count=3
    when "fra1.audsci.net"
        vold_count=5
    when "hkg2.audsci.net"
        vold_count=5
    else
        vold_count=0
    end

    # Determine if we should bid
    if @hostname =~ /^pd[0-9]{1,}-rtbs[0-9]{2}-nobid[0-9]{2}$/
        bidder_enable="false"
    else
        bidder_enable="true"
    end
-%>
####################
# Voldemort Config #
####################
<%
    voldemort_urls=""
    for iter_vold in 1..vold_count
        voldemort_urls+="tcp://#{server_pod}-voldemort%02d.#{@domain}:6666," % iter_vold
    end
    #remove trailing comma
    voldemort_urls=voldemort_urls[0..-2]
-%>
apollo.readonlyUserStore.voldemort.urls=<%= voldemort_urls %>
# End of "rtb/OverrideConfig.properties.voldemort.erb"

